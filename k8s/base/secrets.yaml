apiVersion: v1
kind: Secret
metadata:
  name: dharma-secrets
  namespace: iac-dharma
  labels:
    app: iac-dharma
    component: secrets
type: Opaque
stringData:
  # NOTE: In production, use Sealed Secrets or External Secrets Operator
  # These values are base64 encoded by kubectl automatically
  
  # Authentication Secrets
  jwt-secret: "CHANGE_ME_min_32_chars_random_string"
  jwt-refresh-secret: "CHANGE_ME_different_min_32_chars"
  session-secret: "CHANGE_ME_session_secret_min_32_chars"
  
  # Database Credentials
  db-password: "CHANGE_ME_secure_password"
  db-url: "postgresql://dharma_admin:CHANGE_ME_secure_password@postgres:5432/iac_dharma"
  
  # Redis Credentials
  redis-password: ""
  
---
apiVersion: v1
kind: Secret
metadata:
  name: dharma-cloud-credentials
  namespace: iac-dharma
  labels:
    app: iac-dharma
    component: cloud-credentials
type: Opaque
stringData:
  # AWS Credentials
  aws-access-key-id: ""
  aws-secret-access-key: ""
  aws-region: "us-east-1"
  
  # Azure Credentials
  azure-subscription-id: ""
  azure-tenant-id: ""
  azure-client-id: ""
  azure-client-secret: ""
  
  # GCP Credentials
  gcp-project-id: ""
  gcp-service-account-key: ""

---
apiVersion: v1
kind: Secret
metadata:
  name: dharma-external-integrations
  namespace: iac-dharma
  labels:
    app: iac-dharma
    component: integrations
type: Opaque
stringData:
  # SSO / OAuth
  google-client-id: ""
  google-client-secret: ""
  saml-entry-point: ""
  saml-cert: ""
  
  # External Services
  servicenow-url: ""
  servicenow-username: ""
  servicenow-password: ""
  
  jira-url: ""
  jira-username: ""
  jira-api-token: ""
  
  # AI/ML Services
  openai-api-key: ""

---
# ConfigMap for non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: dharma-config
  namespace: iac-dharma
  labels:
    app: iac-dharma
    component: config
data:
  # Environment
  NODE_ENV: "production"
  PYTHON_ENV: "production"
  
  # Database Configuration
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DB_NAME: "iac_dharma"
  DB_USER: "dharma_admin"
  DB_POOL_MAX: "20"
  DB_POOL_MIN: "2"
  DB_IDLE_TIMEOUT: "30000"
  DB_CONNECT_TIMEOUT: "5000"
  
  # Redis Configuration
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"
  
  # Service URLs (Kubernetes internal DNS)
  API_GATEWAY_URL: "http://api-gateway:3000"
  BLUEPRINT_SERVICE_URL: "http://blueprint-service:3001"
  IAC_GENERATOR_URL: "http://iac-generator:3002"
  GUARDRAILS_ENGINE_URL: "http://guardrails-engine:3003"
  COSTING_SERVICE_URL: "http://costing-service:3004"
  ORCHESTRATOR_SERVICE_URL: "http://orchestrator-service:3005"
  AUTOMATION_ENGINE_URL: "http://automation-engine:3006"
  MONITORING_SERVICE_URL: "http://monitoring-service:3007"
  AI_ENGINE_URL: "http://ai-engine:8000"
  CLOUD_PROVIDER_SERVICE_URL: "http://cloud-provider-service:3010"
  AI_RECOMMENDATIONS_SERVICE_URL: "http://ai-recommendations-service:3011"
  SSO_SERVICE_URL: "http://sso-service:3012"
  
  # Monitoring & Tracing
  JAEGER_ENDPOINT: "http://jaeger:14268/api/traces"
  PROMETHEUS_URL: "http://prometheus:9090"
  GRAFANA_URL: "http://grafana:3000"
  
  # Feature Flags
  ENABLE_AI_RECOMMENDATIONS: "true"
  ENABLE_COST_OPTIMIZATION: "true"
  ENABLE_DRIFT_DETECTION: "true"
  SSO_ENABLED: "false"
  
  # Intervals (milliseconds)
  DRIFT_CHECK_INTERVAL: "300000"
  HEALTH_CHECK_INTERVAL: "60000"
  COST_CHECK_INTERVAL: "3600000"
  
  # Logging
  LOG_LEVEL: "info"
  
  # Rate Limiting
  API_RATE_LIMIT: "1000"
  API_RATE_WINDOW: "15m"
  
  # CORS - Production origins
  ALLOWED_ORIGINS: "https://app.yourdomain.com,https://yourdomain.com"
  
  # Frontend URL
  FRONTEND_URL: "https://app.yourdomain.com"
