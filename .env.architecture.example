# ============================================
# ENTERPRISE ARCHITECTURE INTEGRATION CONFIG
# ============================================
# Copy this file to .env and configure values

# ============================================
# OPEN POLICY AGENT (OPA) CONFIGURATION
# ============================================
OPA_URL=http://localhost:8181
OPA_ENABLED=true
OPA_TIMEOUT_MS=5000
POLICY_ENFORCEMENT_MODE=strict
FALLBACK_VALIDATION=true

# ============================================
# ARCHITECTURE REVIEW WORKFLOW
# ============================================
# Architecture Review Board (ARB) Settings
ARB_MEETING_SCHEDULE=weekly
ARB_MEETING_DAY=friday
ARB_MEETING_TIME=14:00

# Review SLA Configuration
ARCHITECTURE_REVIEW_SLA_DAYS=5
SECURITY_REVIEW_SLA_DAYS=3
DOMAIN_REVIEW_SLA_DAYS=3

# Auto-Escalation
AUTO_ESCALATE_ENABLED=true
AUTO_ESCALATE_AFTER_DAYS=7
ESCALATION_EMAIL=architecture-board-leads@company.com

# ============================================
# AUTO-APPROVAL CONFIGURATION
# ============================================
AUTO_APPROVAL_ENABLED=true
AUTO_APPROVAL_MAX_COST=5000
AUTO_APPROVAL_MAX_COMPLEXITY=simple
AUTO_APPROVAL_ENVIRONMENTS=development,staging
AUTO_REJECTION_CRITICAL_VIOLATIONS=true

# Auto-Approval Conditions
AUTO_APPROVE_TEMPLATE_BASED=true
AUTO_APPROVE_NON_PRODUCTION=false
AUTO_APPROVE_NO_SENSITIVE_DATA=true

# ============================================
# ADR MANAGEMENT
# ============================================
ADR_NUMBERING_PREFIX=ADR
ADR_DEFAULT_STATUS=proposed
ADR_AUTO_ASSIGN_NUMBER=true
ADR_REQUIRE_SUPERSEDE_LINK=true

# ADR Review Settings
ADR_REVIEW_REQUIRED=true
ADR_MIN_REVIEWERS=2
ADR_REVIEW_TIMEOUT_DAYS=10

# ============================================
# COMPLIANCE & GUARDRAILS
# ============================================
# Compliance Frameworks
COMPLIANCE_FRAMEWORKS=SOC2,ISO27001,PCI-DSS,GDPR,HIPAA
DEFAULT_COMPLIANCE_FRAMEWORK=SOC2

# Compliance Scoring
COMPLIANCE_SCORE_CRITICAL_PENALTY=-25
COMPLIANCE_SCORE_HIGH_PENALTY=-10
COMPLIANCE_SCORE_MEDIUM_PENALTY=-5
COMPLIANCE_SCORE_LOW_PENALTY=-2
COMPLIANCE_TARGET_SCORE=95

# Violation Thresholds
MAX_CRITICAL_VIOLATIONS=0
MAX_HIGH_VIOLATIONS=2
MAX_MEDIUM_VIOLATIONS=10

# ============================================
# TECHNOLOGY CATALOG (APPROVED TECHNOLOGIES)
# ============================================
# Databases
APPROVED_DATABASES=postgresql,mysql,mongodb,redis,cosmosdb,dynamodb,aurora

# Compute Services
APPROVED_COMPUTE=vm,kubernetes,aks,eks,gke,azure-functions,lambda,app-service

# Storage Services
APPROVED_STORAGE=s3,azure-blob,gcs,ebs,azure-disk,efs,azure-files

# Messaging Services
APPROVED_MESSAGING=kafka,rabbitmq,service-bus,sqs,pubsub,event-hubs

# Container Registries
APPROVED_REGISTRIES=acr.azurecr.io,gcr.io,docker.io,quay.io

# ============================================
# ARCHITECTURE PATTERNS
# ============================================
# Template Library Configuration
TEMPLATE_LIBRARY_PATH=iac-templates/enterprise-patterns
TEMPLATE_CACHE_ENABLED=true
TEMPLATE_CACHE_TTL_SECONDS=3600

# Anti-Pattern Detection
DETECT_ANTI_PATTERNS=true
ANTI_PATTERN_ACTION=warn

# ============================================
# CMDB ARCHITECTURE REPOSITORY
# ============================================
# Asset Tracking
ASSET_REGISTRATION_REQUIRED=true
ASSET_DEPENDENCY_TRACKING=true
ASSET_USAGE_TRACKING=true

# Health Score Configuration
ASSET_HEALTH_CHECK_ENABLED=true
ASSET_HEALTH_MIN_SCORE=70
ASSET_DEPRECATED_THRESHOLD_DAYS=365
ASSET_REVIEW_FREQUENCY_DAYS=90

# Portfolio Management
PORTFOLIO_HEALTH_CHECK_ENABLED=true
PORTFOLIO_REPORT_FREQUENCY=weekly

# ============================================
# NOTIFICATIONS
# ============================================
# Email Configuration
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SMTP_HOST=smtp.company.com
NOTIFICATION_SMTP_PORT=587
NOTIFICATION_SMTP_USER=noreply@company.com
NOTIFICATION_SMTP_PASSWORD=

# Notification Recipients
ARCHITECTURE_REVIEW_EMAILS=architecture-board@company.com
SECURITY_REVIEW_EMAILS=security-team@company.com
COMPLIANCE_VIOLATION_EMAILS=compliance-team@company.com

# Slack Integration
NOTIFICATION_SLACK_ENABLED=false
SLACK_WEBHOOK_URL=
SLACK_CHANNEL_REVIEWS=#architecture-reviews
SLACK_CHANNEL_VIOLATIONS=#compliance-violations

# Microsoft Teams Integration
NOTIFICATION_TEAMS_ENABLED=false
TEAMS_WEBHOOK_URL=

# ============================================
# METRICS & MONITORING
# ============================================
# Architecture Metrics Collection
METRICS_ENABLED=true
METRICS_COLLECTION_INTERVAL_SECONDS=60

# Performance Targets
TARGET_APPROVAL_TIME_DAYS=3
TARGET_TEMPLATE_USAGE_RATE=0.80
TARGET_STANDARDS_ADOPTION_RATE=0.95
TARGET_TECH_STACK_COMPLIANCE=0.90

# Quality Gates
MIN_COMPLIANCE_SCORE=85
MAX_ARCHITECTURE_DEBT_RATIO=0.20
MAX_DEPRECATED_ASSETS_PERCENTAGE=0.10

# ============================================
# COST GOVERNANCE
# ============================================
# Cost Thresholds
LOW_COST_THRESHOLD=5000
MEDIUM_COST_THRESHOLD=50000
HIGH_COST_THRESHOLD=200000

# Cost Alerts
COST_ALERT_ENABLED=true
COST_ALERT_THRESHOLD_PERCENTAGE=10
COST_OPTIMIZATION_SUGGESTIONS=true

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Encryption Requirements
ENCRYPTION_AT_REST_REQUIRED=true
ENCRYPTION_IN_TRANSIT_REQUIRED=true
ENCRYPTION_KEY_ROTATION_DAYS=90

# Network Security
NETWORK_SEGMENTATION_REQUIRED=true
PUBLIC_ACCESS_ALLOWED=false
PRIVATE_ENDPOINTS_REQUIRED_PROD=true

# Access Control
RBAC_REQUIRED=true
MFA_REQUIRED_PROD=true
SERVICE_ACCOUNT_MANAGED_IDENTITY=true

# ============================================
# REGIONAL & COMPLIANCE RESTRICTIONS
# ============================================
# HIPAA Restrictions
HIPAA_ALLOWED_REGIONS=us-east-1,us-west-2,eu-west-1

# GDPR Data Residency
GDPR_ALLOWED_REGIONS=eu-west-1,eu-central-1,eu-north-1

# PCI-DSS Requirements
PCI_DSS_LOGGING_RETENTION_DAYS=365
PCI_DSS_AUDIT_ENABLED=true

# ============================================
# KUBERNETES SECURITY POLICIES
# ============================================
K8S_PSP_ENABLED=true
K8S_NETWORK_POLICIES_REQUIRED=true
K8S_RBAC_REQUIRED=true
K8S_PRIVILEGED_MODE_ALLOWED=false
K8S_HOST_NETWORK_ALLOWED=false
K8S_RESOURCE_LIMITS_REQUIRED=true

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_ARCHITECTURE_APPROVAL=true
FEATURE_ADR_MANAGEMENT=true
FEATURE_COMPLIANCE_DASHBOARD=true
FEATURE_AUTO_APPROVAL=true
FEATURE_GUARDRAILS_ENGINE=true
FEATURE_CMDB_REPOSITORY=true
FEATURE_ARCHITECTURE_METRICS=true

# ============================================
# LOGGING & DEBUGGING
# ============================================
LOG_LEVEL=info
LOG_ARCHITECTURE_DECISIONS=true
LOG_POLICY_EVALUATIONS=true
LOG_APPROVAL_WORKFLOWS=true

# Debug Mode
DEBUG_MODE=false
DEBUG_POLICY_EVALUATION=false
DEBUG_WORKFLOW_ENGINE=false

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_ADR_OPERATIONS=100
RATE_LIMIT_POLICY_EVALUATIONS=1000
RATE_LIMIT_METRICS_QUERIES=500

# ============================================
# CACHING
# ============================================
CACHE_ENABLED=true
CACHE_ADR_LIST_TTL_SECONDS=300
CACHE_COMPLIANCE_METRICS_TTL_SECONDS=60
CACHE_TEMPLATE_METADATA_TTL_SECONDS=3600
CACHE_TECHNOLOGY_CATALOG_TTL_SECONDS=7200

# ============================================
# BACKUP & RECOVERY
# ============================================
BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/architecture

# ============================================
# INTEGRATION ENDPOINTS
# ============================================
# Internal Services
IAC_GENERATOR_URL=http://iac-generator:3002
COSTING_SERVICE_URL=http://costing-service:3003
MONITORING_SERVICE_URL=http://monitoring-service:3005
CMDB_SERVICE_URL=http://cmdb-agent:3006

# External Integrations
JIRA_ENABLED=false
JIRA_API_URL=
JIRA_PROJECT_KEY=ARCH

CONFLUENCE_ENABLED=false
CONFLUENCE_API_URL=
CONFLUENCE_SPACE_KEY=ARCHITECTURE

SERVICENOW_ENABLED=false
SERVICENOW_API_URL=

# ============================================
# TIMEZONE & LOCALE
# ============================================
TIMEZONE=UTC
DATE_FORMAT=YYYY-MM-DD
TIME_FORMAT=HH:mm:ss

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Note: Main DATABASE_URL should be in main .env file
# These are architecture-specific settings

# Connection Pool for Architecture Queries
ARCHITECTURE_DB_POOL_SIZE=20
ARCHITECTURE_DB_POOL_TIMEOUT_MS=5000

# Query Timeouts
ARCHITECTURE_QUERY_TIMEOUT_MS=10000
COMPLEX_METRICS_QUERY_TIMEOUT_MS=30000
